<!-- 
  WordPress Integration Code for TechEvents
  
  Instructions:
  1. Copy this entire file content
  2. In WordPress, create a new page or edit existing page
  3. Add a "Custom HTML" block
  4. Paste this code into the block
  5. Publish/Update the page
-->

<div id="speaking-events-app">
  <div class="loading">Loading events...</div>
</div>

<script>
const GITHUB_USER = 'Raveendiran-RR';
const REPO_NAME = 'TechEvents';
const BRANCH = 'main';
const JSON_FILE = 'events.json';
const API_URL = `https://cdn.jsdelivr.net/gh/${GITHUB_USER}/${REPO_NAME}@${BRANCH}/${JSON_FILE}`;

async function loadEvents() {
  try {
    const response = await fetch(API_URL, { cache: 'no-cache' });
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
    const data = await response.json();
    renderEventsPage(data);
  } catch (error) {
    console.error('Error loading events:', error);
    document.getElementById('speaking-events-app').innerHTML = 
      '<div class="error">Failed to load events. Please refresh the page.</div>';
  }
}

function renderEventsPage(data) {
  const app = document.getElementById('speaking-events-app');
  app.innerHTML = `
    <div class="speaking-events-page">
      <section class="hero-section" style="background-image: url('${data.hero.image}');">
        <div class="hero-overlay">
          <h1>${data.hero.title}</h1>
          <p class="hero-subtitle">${data.hero.subtitle}</p>
        </div>
      </section>

      <section class="stats-section">
        ${Object.entries(data.stats).map(([key, value]) => `
          <div class="stat-item">
            <div class="stat-number">${key === 'role' ? value.split(' ')[0] : value}</div>
            <div class="stat-label">${key === 'role' ? value.split(' ').slice(1).join(' ') : key.replace('_', ' ')}</div>
          </div>
        `).join('')}
      </section>

      ${data.upcoming && data.upcoming.length > 0 ? `
        <section class="events-section">
          <h2 class="section-title">Upcoming Events</h2>
          ${data.upcoming.map(renderFeaturedEvent).join('')}
        </section>
      ` : ''}

      <section class="events-section">
        <h2 class="section-title">Past Events</h2>
        <div class="events-grid">
          ${data.past.map(renderEventCard).join('')}
        </div>
      </section>

      <section class="cta-section">
        <h2>Interested in having me speak at your event?</h2>
        <p>I'm always excited to share insights on Docker, Kubernetes, and AI infrastructure.</p>
        <a href="mailto:${data.contact.email}" class="btn-cta">Get in Touch</a>
      </section>
    </div>
  `;
}

function renderFeaturedEvent(event) {
  return `
    <div class="featured-event">
      <div class="featured-image">
        <img src="${event.image}" alt="${event.title}">
        <div class="event-badge">UPCOMING</div>
      </div>
      <div class="featured-content">
        <h3>${event.title}</h3>
        <div class="event-meta">
          <span>üìÖ ${event.displayDate}</span>
          <span>üìç ${event.location}</span>
        </div>
        <h4 class="talk-title">${event.talk}</h4>
        <p>${event.description}</p>
        <div class="event-tags">
          ${event.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
        </div>
        <div class="event-actions">
          <a href="${event.eventLink}" class="btn-primary" target="_blank">Event Details</a>
          ${event.slidesLink ? `<a href="${event.slidesLink}" class="btn-secondary" target="_blank">Slides</a>` : ''}
        </div>
      </div>
    </div>
  `;
}

function renderEventCard(event) {
  return `
    <div class="event-card">
      <div class="event-image">
        <img src="${event.image}" alt="${event.title}">
        <div class="event-year">${event.year}</div>
      </div>
      <div class="event-body">
        <h3>${event.title}</h3>
        <p class="event-date">${event.displayDate}</p>
        <p class="talk-topic">${event.talk}</p>
        <div class="event-details">
          <span class="organizer">${event.organizer}</span>
        </div>
        <div class="event-tags-small">
          ${event.tags.map(tag => `<span class="tag-small">${tag}</span>`).join('')}
        </div>
        <a href="${event.eventLink}" class="event-link" target="_blank">View Event ‚Üí</a>
      </div>
    </div>
  `;
}

document.addEventListener('DOMContentLoaded', loadEvents);
</script>

<style>
.loading, .error { text-align: center; padding: 60px; font-size: 1.2em; color: #666; }
.error { color: #d32f2f; }
.speaking-events-page { max-width: 1200px; margin: 0 auto; padding: 20px; font-family: 'Inter', -apple-system, sans-serif; }
.hero-section { height: 400px; background: linear-gradient(135deg, #1a237e 0%, #2196F3 100%); background-size: cover; background-position: center; border-radius: 12px; margin-bottom: 50px; position: relative; }
.hero-overlay { background: rgba(26, 35, 126, 0.85); height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 40px; text-align: center; }
.hero-section h1 { color: white; font-size: 3em; margin: 0 0 20px 0; font-weight: 700; }
.hero-subtitle { color: rgba(255, 255, 255, 0.95); font-size: 1.3em; max-width: 700px; line-height: 1.6; }
.stats-section { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; margin-bottom: 60px; padding: 40px 20px; background: #f8f9fa; border-radius: 12px; }
.stat-item { text-align: center; }
.stat-number { font-size: 2.5em; font-weight: 700; color: #2196F3; margin-bottom: 10px; }
.stat-label { font-size: 1em; color: #666; font-weight: 500; text-transform: capitalize; }
.section-title { font-size: 2.2em; color: #1a237e; margin-bottom: 40px; font-weight: 700; border-left: 5px solid #2196F3; padding-left: 20px; }
.events-section { margin-bottom: 80px; }
.featured-event { display: grid; grid-template-columns: 1fr 1.5fr; gap: 40px; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 40px; }
.featured-image { position: relative; height: 400px; overflow: hidden; }
.featured-image img { width: 100%; height: 100%; object-fit: cover; }
.event-badge { position: absolute; top: 20px; left: 20px; background: #FF6B35; color: white; padding: 8px 20px; border-radius: 20px; font-weight: 600; font-size: 0.9em; }
.featured-content { padding: 40px; }
.featured-content h3 { font-size: 2em; color: #1a237e; margin: 0 0 20px 0; }
.event-meta { display: flex; gap: 30px; margin-bottom: 20px; font-size: 1.1em; color: #666; flex-wrap: wrap; }
.talk-title { font-size: 1.3em; color: #2196F3; margin: 20px 0 15px 0; font-weight: 600; }
.event-tags { display: flex; gap: 10px; margin: 20px 0; flex-wrap: wrap; }
.tag { background: #e3f2fd; color: #1976d2; padding: 8px 16px; border-radius: 20px; font-size: 0.9em; font-weight: 500; }
.event-actions { display: flex; gap: 15px; margin-top: 30px; flex-wrap: wrap; }
.btn-primary, .btn-secondary { padding: 12px 30px; border-radius: 6px; text-decoration: none; font-weight: 600; transition: all 0.3s; display: inline-block; }
.btn-primary { background: #2196F3; color: white; }
.btn-primary:hover { background: #1976d2; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(33, 150, 243, 0.4); }
.btn-secondary { background: transparent; color: #2196F3; border: 2px solid #2196F3; }
.btn-secondary:hover { background: #2196F3; color: white; }
.events-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; }
.event-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.08); transition: transform 0.3s, box-shadow 0.3s; }
.event-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
.event-image { position: relative; height: 220px; overflow: hidden; }
.event-image img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s; }
.event-card:hover .event-image img { transform: scale(1.05); }
.event-year { position: absolute; top: 15px; right: 15px; background: rgba(33, 150, 243, 0.95); color: white; padding: 6px 15px; border-radius: 20px; font-weight: 600; font-size: 0.9em; }
.event-body { padding: 25px; }
.event-body h3 { font-size: 1.4em; color: #1a237e; margin: 0 0 10px 0; line-height: 1.3; }
.event-body .event-date { color: #2196F3; font-weight: 600; margin: 8px 0; display: block; }
.talk-topic { color: #555; line-height: 1.6; margin: 15px 0; min-height: 60px; }
.event-details { margin: 15px 0; }
.organizer { color: #888; font-size: 0.9em; font-style: italic; }
.event-tags-small { display: flex; gap: 8px; margin: 15px 0; flex-wrap: wrap; }
.tag-small { background: #f5f5f5; color: #666; padding: 4px 12px; border-radius: 12px; font-size: 0.85em; }
.event-link { color: #2196F3; text-decoration: none; font-weight: 600; display: inline-block; margin-top: 15px; margin-right: 15px; transition: color 0.3s; }
.event-link:hover { color: #1976d2; }
.cta-section { background: linear-gradient(135deg, #1a237e 0%, #2196F3 100%); padding: 60px 40px; border-radius: 12px; text-align: center; color: white; }
.cta-section h2 { font-size: 2.2em; margin: 0 0 20px 0; }
.cta-section p { font-size: 1.2em; margin-bottom: 30px; opacity: 0.95; }
.btn-cta { background: white; color: #1a237e; padding: 15px 40px; border-radius: 6px; text-decoration: none; font-weight: 600; font-size: 1.1em; display: inline-block; transition: all 0.3s; }
.btn-cta:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(255,255,255,0.3); }
@media (max-width: 768px) {
  .hero-section h1 { font-size: 2em; }
  .hero-subtitle { font-size: 1.1em; }
  .featured-event { grid-template-columns: 1fr; }
  .featured-image { height: 250px; }
  .events-grid { grid-template-columns: 1fr; }
  .stats-section { grid-template-columns: repeat(2, 1fr); }
}
</style>
